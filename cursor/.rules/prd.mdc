---
description: 
globs: 
alwaysApply: true
---
# CRM Application - Product Requirements Document

## 1. Project Overview

### 1.1 Product Vision
A comprehensive Customer Relationship Management (CRM) web application designed to help individual users and small businesses manage contacts, deals, and customer data efficiently. The system will provide personal data management, comprehensive reporting, and streamlined workflow capabilities.

### 1.2 Technology Stack
- **Frontend**: React with Tailwind CSS
- **Form Management**: React Hook Form
- **Backend & Database**: Supabase
- **Authentication**: Supabase Auth (Email/Password strategy)
- **Responsive Design**: Mobile-first approach using Tailwind CSS

### 1.3 Target Users
- **Individual Users**: Personal CRM management with full access to their own data
- **Small Business Owners**: Complete control over their customer relationships and sales pipeline

## 2. User Management & Permissions

### 2.1 Individual User Access
**Permissions:**
- Create, edit, delete all own contacts and deals
- View all own deals and data
- Access all personal reports and analytics
- Import/export own data
- Full control over personal account settings

## 3. Core Features & Functionality

### 3.1 Contact Management

#### 3.1.1 Contact Information Schema
```
Contact Entity:
- id (UUID, Primary Key)
- name (String, Required)
- email (String, Required, Unique per user)
- phone (String)
- company (String)
- job_title (String)
- preferences (JSON/Text)
- created_at (Timestamp)
- updated_at (Timestamp)
- user_id (UUID, Foreign Key - owner)
```

#### 3.1.2 Contact Features
- **CRUD Operations**: Create, Read, Update, Delete contacts
- **Search & Filter**: Search by name, email, company, job title
- **Individual Treatment**: Each contact treated as separate entity (no company grouping)
- **Duplicate Detection**: System should flag potential duplicates based on email/phone
- **Contact List View**: Modern card-based layout showing key information
- **Contact Detail View**: Comprehensive view with all information and related deals

### 3.2 Deal Management

#### 3.2.1 Deal Information Schema
```
Deal Entity:
- id (UUID, Primary Key)
- title (String, Required)
- contact_id (UUID, Foreign Key to Contact)
- user_id (UUID, Foreign Key - owner)
- stage (Enum: 'lead', 'prospect', 'negotiation', 'closed-won', 'closed-lost')
- monetary_value (Decimal)
- expected_close_date (Date)
- probability_percentage (Integer, 0-100)
- created_at (Timestamp)
- updated_at (Timestamp)
```

#### 3.2.2 Deal Pipeline Stages
1. **Lead**: Initial contact/inquiry
2. **Prospect**: Qualified potential customer
3. **Negotiation**: Active discussion/proposal stage
4. **Closed-Won**: Successfully closed deal
5. **Closed-Lost**: Deal lost to competitor or abandoned

#### 3.2.3 Deal Features
- **Pipeline Management**: Visual pipeline with drag-and-drop capability
- **Progress Tracking**: Track stage progression with timestamps
- **Value Tracking**: Monitor monetary value and probability
- **Multiple Deals per Contact**: One contact can have multiple active/closed deals

### 3.3 Deal-Related Tasks & Activities

#### 3.3.1 Task Schema
```
Task Entity:
- id (UUID, Primary Key)
- deal_id (UUID, Foreign Key to Deal)
- title (String, Required)
- description (Text)
- due_date (Date)
- status (Enum: 'pending', 'completed', 'overdue')
- user_id (UUID, Foreign Key - owner)
- created_at (Timestamp)
- updated_at (Timestamp)
```

#### 3.3.2 Task Features
- **Task Creation**: Create tasks linked to specific deals
- **Due Date Management**: Set and track due dates
- **Status Tracking**: Monitor task completion
- **Task Lists**: View tasks by deal or status

### 3.4 Communication History

#### 3.4.1 Communication Schema
```
Communication Entity:
- id (UUID, Primary Key)
- contact_id (UUID, Foreign Key to Contact)
- deal_id (UUID, Foreign Key to Deal, Nullable)
- type (Enum: 'phone_call', 'email', 'meeting', 'note')
- subject (String)
- content (Text)
- communication_date (Timestamp)
- user_id (UUID, Foreign Key - owner)
- created_at (Timestamp)
- updated_at (Timestamp)
```

#### 3.4.2 Communication Features
- **Multi-Type Tracking**: Phone calls, emails, meetings, notes
- **Dual Linking**: Link communications to both contacts and deals
- **Timeline View**: Chronological display of all communications
- **Search & Filter**: Filter by type, date range

### 3.5 Purchase History

#### 3.5.1 Purchase History Schema
```
Purchase Entity:
- id (UUID, Primary Key)
- contact_id (UUID, Foreign Key to Contact)
- deal_id (UUID, Foreign Key to Deal, Nullable)
- date (Date, Required)
- amount (Decimal, Required)
- product_service (String, Required)
- status (Enum: 'completed', 'pending', 'refunded', 'cancelled')
- created_at (Timestamp)
- updated_at (Timestamp)
- user_id (UUID, Foreign Key - owner)
```

#### 3.5.2 Purchase Features
- **Purchase Tracking**: Complete purchase history per contact
- **Revenue Analysis**: Track total revenue per contact/deal
- **Product/Service Categorization**: Categorize purchases
- **Status Management**: Track purchase status changes

## 4. User Interface & Experience

### 4.1 Application Layout
- **Navigation**: Left sidebar navigation
- **Design Style**: Modern card-based layout
- **Responsiveness**: Mobile-first responsive design
- **Color Scheme**: Professional, clean design using Tailwind CSS

### 4.2 Main Navigation Structure
```
Sidebar Navigation:
├── Dashboard
├── Contacts
│   ├── All Contacts
│   ├── Add Contact
│   └── Import Contacts
├── Deals
│   ├── Pipeline View
│   ├── All Deals
│   └── Add Deal
├── Communications
│   ├── All Communications
│   └── Add Communication
├── Reports & Analytics
│   ├── Sales Pipeline
│   ├── Conversion Rates
│   ├── Personal Performance
│   └── Revenue Forecasts
├── Import/Export
└── Settings
    ├── Profile Settings
    └── Account Preferences
```

### 4.3 Dashboard Requirements
- **Key Metrics Cards**: Total contacts, active deals, revenue this month, conversion rate
- **Pipeline Overview**: Visual representation of deals by stage
- **Recent Activities**: Latest communications and deal updates
- **Quick Actions**: Add contact, add deal, log communication
- **Performance Charts**: Revenue trends, deal closure rates
- **Personal Content**: Dashboard tailored to individual user's data

## 5. Reporting & Analytics

### 5.1 Required Reports

#### 5.1.1 Sales Pipeline Report
- **Visual Pipeline**: Deals by stage with monetary values
- **Conversion Rates**: Percentage of deals moving between stages
- **Time in Stage**: Average time deals spend in each stage
- **Pipeline Value**: Total value of deals in each stage

#### 5.1.2 Conversion Rates Report
- **Overall Conversion**: Lead to closed-won percentage
- **Stage Conversion**: Conversion rates between each stage
- **Time Period Analysis**: Conversion trends over time

#### 5.1.3 Personal Performance Report
- **Individual Metrics**: Deals closed, revenue generated, activities logged
- **Activity Tracking**: Communication frequency and quality
- **Goal Tracking**: Performance against personal targets

#### 5.1.4 Revenue Forecasts Report
- **Monthly Projections**: Expected revenue based on pipeline
- **Quarterly Forecasts**: Longer-term revenue predictions
- **Probability-Weighted**: Forecasts based on deal probability
- **Historical Comparison**: Current vs previous period performance

### 5.2 Report Features
- **Visual Charts**: Bar charts, line graphs, pie charts using chart library
- **Data Tables**: Detailed tabular data with sorting and filtering
- **Time Period Filters**: Last 30 days, quarter, year, custom ranges
- **Export Capability**: Export reports to PDF and Excel
- **Real-Time Updates**: Reports update automatically with new data

## 6. Data Import/Export

### 6.1 Import Functionality
- **CSV Import**: Support for contact and deal data import
- **Excel Support**: Import from .xlsx and .xls files
- **Data Validation**: Comprehensive validation with error reporting
- **Duplicate Detection**: Identify and handle duplicate records
- **Field Mapping**: Map import fields to system fields
- **Preview Mode**: Preview data before final import

### 6.2 Export Functionality
- **Multiple Formats**: CSV, Excel, PDF export options
- **Selective Export**: Choose specific fields and records
- **Report Export**: Export generated reports
- **Bulk Operations**: Export large datasets efficiently

## 7. Security & Data Management

### 7.1 Data Security
- **User Isolation**: Each user can only access their own data
- **Row-Level Security**: Database-level security policies
- **Authentication**: Secure login with session management
- **Data Encryption**: Encrypted data storage and transmission

### 7.2 Data Integrity
- **Validation Rules**: Comprehensive data validation
- **Audit Trails**: Track all data changes
- **Backup Systems**: Regular data backups
- **Error Handling**: Graceful error handling and recovery

## 8. Performance Requirements

### 8.1 Response Times
- **Page Load**: < 2 seconds for initial load
- **Data Operations**: < 1 second for CRUD operations
- **Search Results**: < 500ms for search queries
- **Report Generation**: < 5 seconds for standard reports

### 8.2 Scalability
- **Data Volume**: Support for 10,000+ contacts per user
- **Concurrent Users**: Efficient handling of multiple sessions
- **Storage**: Scalable data storage solutions

## 9. Success Criteria

### 9.1 User Experience
- **Intuitive Interface**: Easy to navigate and use
- **Mobile Responsive**: Works well on all device sizes
- **Fast Performance**: Meets response time requirements
- **Reliable**: 99.9% uptime target

### 9.2 Functionality
- **Complete CRUD**: All data management operations work correctly
- **Accurate Reports**: Reports reflect real-time data accurately
- **Data Integrity**: No data loss or corruption
- **Import/Export**: Reliable data transfer capabilities

---

**Document Version**: 2.0  
**Last Updated**: May 31, 2025  
**Author**: Product Team  
**Based on**: Simplified User Requirements (No Role System)
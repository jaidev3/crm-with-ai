# Pinecone Setup Guide for CRM AI Assistant

This guide will walk you through setting up Pinecone for the AI Assistant's knowledge base functionality.

## What is Pinecone?

Pinecone is a vector database service that stores and searches through document embeddings. Our AI Assistant uses it to:

- Store document embeddings generated by OpenAI
- Perform semantic search to find relevant context for user questions
- Enable context-aware AI responses based on your knowledge base

## Step-by-Step Setup

### 1. Create a Pinecone Account

1. Go to [Pinecone.io](https://www.pinecone.io)
2. Click "Sign Up" and create a free account
3. Verify your email address

### 2. Create an Index

1. Log into your Pinecone dashboard
2. Click "Create Index"
3. Configure your index with these settings:

   **Index Name**: `crm-embeddings` (or your preferred name)

   **Dimensions**: `1536`

   - This matches OpenAI's text-embedding-3-small model

   **Metric**: `cosine`

   - Best for semantic similarity searches

   **Pod Type**: `s1.x1`

   - Starter pod type (suitable for development and small deployments)

   **Replicas**: `1`

   - Single replica for starter usage

4. Click "Create Index"

### 3. Get Your API Key

1. In the Pinecone dashboard, click on "API Keys" in the left sidebar
2. Copy your API key (it will look like: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`)
3. Keep this key secure - you'll need it for the environment configuration

### 4. Configure Environment Variables

Add these to your `.env.local` file:

```env
# Pinecone Configuration
VITE_PINECONE_API_KEY=your_actual_api_key_here
VITE_PINECONE_INDEX=crm-embeddings
```

**Important**: Replace `your_actual_api_key_here` with your actual Pinecone API key.

### 5. Verify Setup

1. Start your development server: `npm run dev`
2. Navigate to the AI Assistant page
3. Click on "Knowledge" tab
4. Try adding a document or loading sample data
5. If successful, you should see the document appear in your knowledge base

## Index Configuration Details

### Why These Settings?

**Dimensions (1536)**:

- Matches OpenAI's text-embedding-3-small model output
- Required for compatibility with our embedding generation

**Cosine Similarity**:

- Best metric for text embeddings
- Measures the angle between vectors, ignoring magnitude
- Ideal for semantic similarity in text

**Namespace Usage**:

- We use the namespace `crm-knowledge` to organize embeddings
- Keeps different types of data separated within the same index

## Troubleshooting

### Common Issues

1. **"Index not found" error**

   - Verify your index name matches the `VITE_PINECONE_INDEX` value
   - Check that the index was created successfully in Pinecone dashboard

2. **"Unauthorized" error**

   - Verify your API key is correct
   - Check that the API key has proper permissions

3. **"Dimension mismatch" error**

   - Ensure your index was created with 1536 dimensions
   - This must match OpenAI's embedding model output

4. **Slow query performance**
   - Consider upgrading to a larger pod type for production use
   - Check your index usage in the Pinecone dashboard

### Testing Your Setup

You can test if Pinecone is working correctly by:

1. Adding a test document in the Knowledge Base
2. Asking the AI Assistant a question related to that document
3. The AI should reference your document in its response

## Production Considerations

### Scaling

For production deployments, consider:

- **Pod Type**: Upgrade to `s1.x2` or higher for better performance
- **Replicas**: Add replicas for high availability
- **Monitoring**: Set up monitoring for query volume and latency

### Security

- Store API keys as environment variables, never in code
- Consider using Pinecone's upcoming authentication features for team management
- Monitor API usage through Pinecone dashboard

### Cost Management

- Monitor your usage in the Pinecone dashboard
- Free tier includes 1 index and 5M vector storage
- Delete unused indexes to save costs
- Consider archiving old embeddings if storage becomes an issue

## Support

If you encounter issues:

1. Check the Pinecone documentation: [docs.pinecone.io](https://docs.pinecone.io)
2. Verify your environment variables are set correctly
3. Check the browser console for detailed error messages
4. Review the application logs for Pinecone-related errors

## Next Steps

Once Pinecone is set up:

1. Add your company's knowledge base documents
2. Test the AI Assistant with various questions
3. Optimize your document organization for better search results
4. Consider setting up monitoring for production usage
